{"ast":null,"code":"var _jsxFileName = \"/home/cambam/Desktop/dev/mern/movieReviewApp/movie-reviews/frontend/src/components/add-review.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport MovieDataService from \"../services/movies\";\nimport { Link } from \"react-router-dom\";\nimport Form from 'react-bootstrap/Form';\nimport Button from \"react-bootstrap/esm/Button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddReview = props => {\n  _s();\n  let editing = false;\n  let initialReviewState = \"\";\n  if (props.location.state && props.location.state.currentReview) {\n    editing = true;\n    initialReviewState = props.location.state.currentReview.review;\n  }\n  const [review, setReview] = useState(initialReviewState);\n  const [submitted, setSubitted] = useState(false);\n  const onChangeReview = e => {\n    const review = e.target.value;\n    setReview(review);\n  };\n  const saveReview = () => {\n    var data = {\n      review: review,\n      name: props.user.name,\n      user_id: props.user.id,\n      movie_id: props.match.params.id // This will get the movie id directly from the url\n    };\n\n    if (editing) {\n      // get existing review id\n      data.review_id = props.location.state.currentReview._id;\n      MovieDataService.updateReview(data).then(response => {\n        setSubitted(true);\n        console.log(response.data);\n      }).catch(e => {\n        console.log(e);\n      });\n    } else {\n      MovieDataService.onChangeReview(data).then(response => {\n        setSubitted(true);\n      }).catch(e => {\n        console.log(e);\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: submitted ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Review submitted successfully\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/movies/\" + props.match.params.id,\n        children: \"Back to Movie\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(Form, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: [editing ? \"Edit\" : \"Create\", \" Review\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"text\",\n          required: true,\n          value: review,\n          onChange: onChangeReview\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: saveReview,\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n};\n_s(AddReview, \"Cx2ycIY01snbh4cmMqrA7EYw94k=\");\n_c = AddReview;\nexport default AddReview;\nvar _c;\n$RefreshReg$(_c, \"AddReview\");","map":{"version":3,"names":["React","useState","MovieDataService","Link","Form","Button","jsxDEV","_jsxDEV","AddReview","props","_s","editing","initialReviewState","location","state","currentReview","review","setReview","submitted","setSubitted","onChangeReview","e","target","value","saveReview","data","name","user","user_id","id","movie_id","match","params","review_id","_id","updateReview","then","response","console","log","catch","children","fileName","_jsxFileName","lineNumber","columnNumber","to","Group","Label","Control","type","required","onChange","variant","onClick","_c","$RefreshReg$"],"sources":["/home/cambam/Desktop/dev/mern/movieReviewApp/movie-reviews/frontend/src/components/add-review.js"],"sourcesContent":["import React, { useState } from \"react\"\nimport MovieDataService from \"../services/movies\"\nimport { Link } from \"react-router-dom\"\nimport Form from 'react-bootstrap/Form'\nimport Button from \"react-bootstrap/esm/Button\"\n\nconst AddReview = props => {\n\n    let editing = false\n    let initialReviewState = \"\"\n\n    if(props.location.state && props.location.state.currentReview){\n        editing = true\n        initialReviewState = props.location.state.currentReview.review\n    }\n\n    const [review, setReview] = useState(initialReviewState)\n    const [submitted, setSubitted] = useState(false)\n\n    const onChangeReview = e => {\n        const review = e.target.value\n        setReview(review);\n    }\n\n    const saveReview = () => {\n        var data = {\n            review: review,\n            name: props.user.name,\n            user_id: props.user.id,\n            movie_id: props.match.params.id // This will get the movie id directly from the url\n        }\n\n        if(editing){\n            // get existing review id\n            data.review_id = props.location.state.currentReview._id\n            MovieDataService.updateReview(data).then(response =>{\n                setSubitted(true);\n                console.log(response.data)\n            }).catch(e =>{\n                console.log(e)\n            })\n        }\n        else{\n            MovieDataService.onChangeReview(data).then(response => {\n                setSubitted(true)\n            }).catch(e => {\n                console.log(e);\n            })\n        }\n    }\n\n    return(\n        <div>\n            {submitted ? (\n                <div>\n                    <h4>Review submitted successfully</h4>\n                    <Link to={\"/movies/\" + props.match.params.id}>\n                        Back to Movie\n                    </Link>\n                </div>\n            ):(\n                <Form>\n                    <Form.Group>\n                        <Form.Label>{editing ? \"Edit\" : \"Create\"} Review</Form.Label>\n                        <Form.Control\n                        type=\"text\"\n                        required\n                        value={review}\n                        onChange={onChangeReview}/>\n                    </Form.Group>\n                    <Button variant=\"primary\" onClick={saveReview}>\n                        Submit\n                    </Button>\n                </Form>\n            )}\n        </div>\n    )\n}\n\nexport default AddReview;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}